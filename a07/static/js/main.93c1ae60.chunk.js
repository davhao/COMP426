(this.webpackJsonpa07_dev=this.webpackJsonpa07_dev||[]).push([[0],{12:function(e,t,s){},13:function(e,t,s){},15:function(e,t,s){"use strict";s.r(t);var a=s(1),r=s.n(a),i=s(5),n=s.n(i),o=(s(12),s(2)),h=s(4),c=(s(13),s(6)),u=s(7),l=function(){function e(t){var s=this;Object(c.a)(this,e),this.generateTile=function(){for(var e=Math.floor(Math.random()*Math.pow(s.size,2));0!==s.gameState.board[e];)e=Math.floor(Math.random()*Math.pow(s.size,2));var t=Math.random();s.gameState.board[e]=t<.9?2:4},this.checkWin=function(){return s.gameState.board.includes(2048)},this.checkLoss=function(){return!(s.move("up",!0)||s.move("down",!0)||s.move("left",!0)||s.move("right",!0))},this.size=t,this.gameState={board:null,score:0,won:!1,over:!1},this.setupNewGame(),this.boardObservers={move:[],win:[],lose:[]}}return Object(u.a)(e,[{key:"getGameState",value:function(){return this.gameState}},{key:"setupNewGame",value:function(){for(var e=[],t=0;t<Math.pow(this.size,2);t++)e.push(0);this.gameState.board=e,this.generateTile(),this.generateTile(),this.gameState=Object(o.a)(Object(o.a)({},this.gameState),{},{score:0,won:!1,over:!1})}},{key:"loadGame",value:function(e){this.gameState=Object(o.a)(Object(o.a)({},this.gameState),e)}},{key:"move",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=!1;switch(e){case"up":for(var a=0;a<this.size;a++){for(var r=[],i=a;i<Math.pow(this.size,2);i+=this.size)r.push(i);if(r.length===this.size){var n=this.slideArray(r,t);s=s||n}}break;case"down":for(var o=Math.pow(this.size,2)-1;o>=0;o--){for(var h=[],c=o;c>=0;c-=this.size)h.push(c);if(h.length===this.size){var u=this.slideArray(h,t);s=s||u}}break;case"left":for(var l=0;l<Math.pow(this.size,2);l+=this.size){for(var v=[],d=l;d<l+this.size;d++)v.push(d);if(v.length===this.size){var f=this.slideArray(v,t);s=s||f}}break;case"right":for(var m=this.size-1;m<Math.pow(this.size,2);m+=this.size){for(var b=[],g=m;g>m-this.size;g--)b.push(g);if(b.length===this.size){var p=this.slideArray(b,t);s=s||p}}}return t||(s&&this.generateTile(),this.checkWin()&&(this.gameState.won=!0,this.update("win")),this.checkLoss()&&(this.gameState.over=!0,this.update("lose")),this.update("move")),s}},{key:"slideArray",value:function(e,t){for(var s=this,a=e.map((function(e){return s.gameState.board[e]})),r=[],i=null,n=0;n<a.length;){var o=a[n];0!==o?i?o===i?(r.push(o+i),t||(this.gameState.score+=o+i),i=null,n++):(r.push(i),i=o,n++):(i=o,n++):n++}for(i&&r.push(i);r.length<e.length;)r.push(0);for(var h=!1,c=0;c<a.length;c++){var u=e[c];h=h||this.gameState.board[u]!==r[c],t||(this.gameState.board[u]=r[c])}return h}},{key:"toString",value:function(){for(var e="",t=0;t<Math.pow(this.size,2);t+=this.size){for(var s=[],a=0;a<this.size;a++)s.push(this.gameState.board[t+a]);e+=s.toString(),e+="\n"}return e}},{key:"onMove",value:function(e){this.boardObservers.move.push(e)}},{key:"onWin",value:function(e){this.boardObservers.win.push(e)}},{key:"onLose",value:function(e){this.boardObservers.lose.push(e)}},{key:"update",value:function(e){var t=this;this.boardObservers[e].forEach((function(e){return e(t.getGameState())}))}}]),e}(),v=s(0),d=function(e){for(var t=e.gameState.board.map((function(e,t){return Object(v.jsx)("div",{className:"tile",children:Object(v.jsx)("span",{children:0!==e?e:null})},t)})),s=[];t.length;){for(var a=[],r=0;r<4;r++)a.push(t.shift());s.push(a)}return s=s.map((function(e,t){return Object(v.jsx)("div",{className:"row",children:e},t)})),Object(v.jsx)("div",{className:"board",children:s})};var f=function(){var e=Object(a.useState)(new l(4)),t=Object(h.a)(e,2),s=t[0],r=t[1],i=Object(a.useState)(s.getGameState()),n=Object(h.a)(i,2),c=n[0],u=n[1];Object(a.useEffect)((function(){return document.addEventListener("keydown",f),m(),function(){document.removeEventListener("keydown",f)}}),[]);var f=function(e){switch(console.log(e.key),e.key){case"ArrowUp":s.move("up");break;case"ArrowDown":s.move("down");break;case"ArrowLeft":s.move("left");break;case"ArrowRight":s.move("right")}},m=function(){s.onMove((function(e){console.log(e.board),u(Object(o.a)({},e))}))};return Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)("h1",{children:"David's 2048"}),Object(v.jsx)("h2",{style:c.over?{color:"#ff5555"}:{color:"#8be9fd "},children:c.over?"Game Over":c.won?"You Win!":null}),Object(v.jsxs)("div",{className:"game-info",children:[Object(v.jsxs)("h3",{children:["Score: ",c.score]}),Object(v.jsx)("h3",{className:"reset",onClick:function(){console.log("reset"),s.setupNewGame(),r(s),u(s.getGameState())},children:"Reset Game"})]}),Object(v.jsx)("div",{className:"board-wrapper",children:Object(v.jsx)(d,{gameState:c})}),Object(v.jsx)("div",{className:"instructions",children:Object(v.jsxs)("span",{children:[Object(v.jsx)("strong",{children:"HOW TO PLAY:"})," Use your arrow keys to move the tiles. Tiles with the same number merge into one when they touch. Add them up to reach 2048!"]})})]})},m=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,16)).then((function(t){var s=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,n=t.getTTFB;s(e),a(e),r(e),i(e),n(e)}))};n.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(f,{})}),document.getElementById("root")),m()}},[[15,1,2]]]);
//# sourceMappingURL=main.93c1ae60.chunk.js.map